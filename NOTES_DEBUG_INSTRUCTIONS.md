# üîç –û—Ç–ª–∞–¥–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã —Å –∑–∞–º–µ—Ç–∫–∞–º–∏

## –ü—Ä–æ–±–ª–µ–º–∞
–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–º–µ—Ç–æ–∫ (`notes.html`) –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π –∑–∞–≥—Ä—É–∑–æ—á–Ω—ã–π —Å–ø–∏–Ω–Ω–µ—Ä –∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–∞–º–µ—Ç–∫–∏.

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. –£–ø—Ä–æ—â–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ `auth.js`
- **–£–¥–∞–ª–µ–Ω–æ:** –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (`validateUserOnServer()`)
- **–£–¥–∞–ª–µ–Ω–æ:** –û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π (`waitForRequiredModules()`)
- **–ü—Ä–∏—á–∏–Ω–∞:** –≠—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥–ª–∏ –∑–∞–≤–∏—Å–∞—Ç—å, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –≤—ã–∑–æ–≤ callback

### 2. –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
–í–æ –≤—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ—è–≤—è—Ç—Å—è –ª–æ–≥–∏:
```
üìù notes.html script block started
‚úì window.onUserLoaded callback defined
‚Üí Calling Auth.initAuthenticatedPage()...
‚úì Auth.initAuthenticatedPage() returned
üîÑ initAuthenticatedPage –≤—ã–∑–≤–∞–Ω, document.readyState = "interactive"
‚úÖ DOM —É–∂–µ –≥–æ—Ç–æ–≤, –≤—ã–∑—ã–≤–∞–µ–º performInit —Å—Ä–∞–∑—É
üöÄ performInit: –ù–∞—á–∞–ª–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
‚úÖ performInit: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω: [–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è]
üîç performInit: –ü—Ä–æ–≤–µ—Ä—è–µ–º callback, window.onUserLoaded = "function"
üéØ performInit: –í—ã–∑—ã–≤–∞–µ–º window.onUserLoaded —Å user: {...}
üë§ onUserLoaded callback INVOKED with user: {...}
üë§ onUserLoaded: Setting currentUserId = [ID]
üë§ onUserLoaded: Calling loadNotes()...
üì• loadNotes() called with currentUserId = [ID]
üì° Fetching: /api/notes?user_id=[ID]
üìä Response status: 200 OK
‚úì Loaded notes: [N] notes
```

## –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### –°–ø–æ—Å–æ–± 1: –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏ (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
1. –û—Ç–∫—Ä–æ–π—Ç–µ `/dashboard/debug-notes-loading.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏
3. –§–∞–π–ª —Å–∏–º—É–ª–∏—Ä—É–µ—Ç –≤—Å—é –ª–æ–≥–∏–∫—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

### –°–ø–æ—Å–æ–± 2: –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –∑–∞–º–µ—Ç–æ–∫
1. –û—Ç–∫—Ä–æ–π—Ç–µ `Developer Tools` (F12 –∏–ª–∏ Cmd+Option+J)
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/dashboard/notes.html`
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å –æ—á–∏—Å—Ç–∫–æ–π –∫—ç—à–∞: **Cmd+Shift+R** (Mac) –∏–ª–∏ **Ctrl+Shift+R** (Windows/Linux)
4. –í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –≤—Å–µ –ª–æ–≥–∏, –Ω–∞—á–∏–Ω–∞—è —Å "üìù notes.html script block started"

## –ß—Ç–æ –∏—Å–∫–∞—Ç—å –≤ –ª–æ–≥–∞—Ö

### ‚úÖ –í—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –µ—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ:
```
üë§ onUserLoaded callback INVOKED with user: {...}
‚úì Loaded notes: [N] notes
```

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ –µ—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ:
```
‚ö†Ô∏è performInit: window.onUserLoaded –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏—è
```
‚Üí Callback –Ω–µ –±—ã–ª –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤–æ–≤—Ä–µ–º—è

```
‚ùå performInit: –¢—Ä–µ–±—É–µ—Ç—Å—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
```
‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω, –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –Ω–∞ login

```
‚ùå loadNotes error: ...
```
‚Üí –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ –∑–∞–º–µ—Ç–æ–∫ —Å —Å–µ—Ä–≤–µ—Ä–∞

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —Å–ø–∏–Ω–Ω–µ—Ä –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ
1. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12)
2. –ò—â–∏—Ç–µ –æ—à–∏–±–∫–∏ –∫—Ä–∞—Å–Ω—ã–º —Ü–≤–µ—Ç–æ–º –∏–ª–∏ –ª–æ–≥–∏ —Å ‚ùå
3. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É —Å Cmd+Shift+R

### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ –æ—à–∏–±–∫—É "–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏"
1. –ö–æ–Ω—Å–æ–ª—å –ø–æ–∫–∞–∂–µ—Ç URL –≤ –ª–æ–≥–µ "üì° Fetching: ..."
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ª–∏ user_id
3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ "ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ localStorage: –æ—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Application ‚Üí Local Storage
2. –î–æ–ª–∂–Ω–æ –±—ã—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ "telegram_user"
3. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ—Å—å –∏ –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å —Å–Ω–æ–≤–∞

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–í –∫–æ–Ω—Å–æ–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
localStorage.getItem('telegram_user')

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å ID
JSON.parse(localStorage.getItem('telegram_user')).id

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ª–∏ —Ñ—É–Ω–∫—Ü–∏—è callback
typeof window.onUserLoaded
```

## –û–±–Ω–æ–≤–ª—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- ‚úÖ `/dashboard/auth.js` - —É–ø—Ä–æ—â–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- ‚úÖ `/dashboard/notes.html` - –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–¥—Ä–æ–±–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- ‚úÖ `/dashboard/debug-notes-loading.html` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è