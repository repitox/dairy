# ‚úÖ –§–ò–ù–ê–õ–¨–ù–´–ô –ß–ï–ö-–õ–ò–°–¢

## üìã –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### Frontend –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚úÖ

- [x] **task.html** 
  - –°—Ç—Ä–æ–∫–∞ 111: –ó–∞–º–µ–Ω–µ–Ω `getUserId()` –Ω–∞ `await getDbUserId()`
  - –°—Ç—Ä–æ–∫–∞ 122: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω endpoint `/api/tasks?` ‚Üí `/api/tasks/{taskId}?`
  - –°—Ç—Ä–æ–∫–∞ 185: –î–æ–±–∞–≤–ª–µ–Ω `await getDbUserId()` –≤ toggle —Ñ—É–Ω–∫—Ü–∏—é
  - –°—Ç—Ä–æ–∫–∞ 186: –î–æ–±–∞–≤–ª–µ–Ω–∞ query –ø–∞—Ä–∞–º–µ—Ç—Ä `?user_id=`
  - –°—Ç—Ä–æ–∫–∞ 216: –î–æ–±–∞–≤–ª–µ–Ω `await getDbUserId()` –≤ delete —Ñ—É–Ω–∫—Ü–∏—é
  - –°—Ç—Ä–æ–∫–∞ 217: –î–æ–±–∞–≤–ª–µ–Ω–∞ query –ø–∞—Ä–∞–º–µ—Ç—Ä –∏ body –ø–∞—Ä–∞–º–µ—Ç—Ä
  - –°—Ç—Ä–æ–∫–∞ 240: –î–æ–±–∞–≤–ª–µ–Ω `await getDbUserId()` –≤ postpone —Ñ—É–Ω–∫—Ü–∏—é
  - –°—Ç—Ä–æ–∫–∞ 249: –î–æ–±–∞–≤–ª–µ–Ω–∞ query –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ PUT –∑–∞–ø—Ä–æ—Å
  - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω—ã emoji –ø—Ä–µ—Ñ–∏–∫—Å—ã (üìã‚úÖ‚ùå)

- [x] **task_edit.html**
  - –°—Ç—Ä–æ–∫–∞ 159: –ó–∞–º–µ–Ω–µ–Ω `getUserId()` –Ω–∞ `await getDbUserId()`
  - –°—Ç—Ä–æ–∫–∞ 167: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω endpoint –Ω–∞ `/api/tasks/{taskId}?user_id=`
  - –°—Ç—Ä–æ–∫–∞ 174: –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ userId –≤ window –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é
  - –°—Ç—Ä–æ–∫–∞ 203: –î–æ–±–∞–≤–ª–µ–Ω `await getDbUserId()` –≤ handleSubmit
  - –°—Ç—Ä–æ–∫–∞ 209: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–µ `due_date` (–±—ã–ª–æ `date`)
  - –°—Ç—Ä–æ–∫–∞ 211: –î–æ–±–∞–≤–ª–µ–Ω–∞ `user_id` –≤ body
  - –°—Ç—Ä–æ–∫–∞ 214: –î–æ–±–∞–≤–ª–µ–Ω–∞ query –ø–∞—Ä–∞–º–µ—Ç—Ä –≤ PUT –∑–∞–ø—Ä–æ—Å

- [x] **task_add.html**
  - –°—Ç—Ä–æ–∫–∞ 160: –ó–∞–º–µ–Ω–µ–Ω `getUserId()` –Ω–∞ `await getDbUserId()`
  - –°—Ç—Ä–æ–∫–∞ 210: –ó–∞–º–µ–Ω–µ–Ω `getUserId()` –Ω–∞ `await getDbUserId()`
  - –°—Ç—Ä–æ–∫–∞ 211-215: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —á—Ç–æ userId –Ω–µ undefined
  - –°—Ç—Ä–æ–∫–∞ 225: –î–æ–±–∞–≤–ª–µ–Ω–∞ `user_id` –≤ taskData –æ–±—ä–µ–∫—Ç

### Backend –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚úÖ

- [x] **app/api/tasks.py**
  - –°—Ç—Ä–æ–∫–∞ 140: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `user_id: int = None` –≤ PUT
  - –°—Ç—Ä–æ–∫–∞ 145-146: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è user_id –∏–∑ query
  - –°—Ç—Ä–æ–∫–∞ 178: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `user_id: int = None` –≤ toggle
  - –°—Ç—Ä–æ–∫–∞ 183-184: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è user_id –∏–∑ query
  - –°—Ç—Ä–æ–∫–∞ 200: –î–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä–∞–º–µ—Ç—Ä `user_id: int = None` –≤ DELETE
  - –°—Ç—Ä–æ–∫–∞ 205-206: –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è user_id –∏–∑ query
  - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏: –î–æ–±–∞–≤–ª–µ–Ω—ã ‚úÖ –º–∞—Ä–∫–µ—Ä—ã

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞

### task.html
```
‚úÖ async loadTask()
‚úÖ await getDbUserId()
‚úÖ try-catch –±–ª–æ–∫–∏
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π endpoint
‚úÖ user_id –≤ delete
‚úÖ user_id –≤ toggle
‚úÖ user_id –≤ put
```

### task_edit.html
```
‚úÖ async loadTask()
‚úÖ await getDbUserId()
‚úÖ window.taskUserId —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
‚úÖ try-catch –±–ª–æ–∫–∏
‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π endpoint
‚úÖ user_id –≤ PUT body
‚úÖ user_id –≤ query
‚úÖ due_date –≤–º–µ—Å—Ç–æ date
```

### task_add.html
```
‚úÖ async loadProjects()
‚úÖ async handleSubmit()
‚úÖ await getDbUserId() –≤ –æ–±–µ–∏—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö
‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ userId !== undefined
‚úÖ user_id –≤ POST body
‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚úÖ try-catch –±–ª–æ–∫–∏
```

### app/api/tasks.py
```
‚úÖ PUT endpoint –≥–∏–±–∫–∏–π
‚úÖ POST/toggle endpoint –≥–∏–±–∫–∏–π
‚úÖ DELETE endpoint –≥–∏–±–∫–∏–π
‚úÖ –í—Å–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç query –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
‚úÖ –í—Å–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç body –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚úÖ –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ —Å ‚úÖ
```

---

## üß™ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –û–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ç–æ—Ä—ã–µ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞—é—Ç ‚úÖ

- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –¥–µ—Ç–∞–ª—å–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∑–∞–¥–∞—á–∏ - `GET /api/tasks/{id}?user_id=123` ‚Üí 200 OK
- [x] –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–¥–∞—á–∏ - –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª–µ–π
- [x] –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ - `PUT /api/tasks/{id}?user_id=123` ‚Üí 200 OK
- [x] –£–¥–∞–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á–∏ - `DELETE /api/tasks/{id}?user_id=123` ‚Üí 200 OK
- [x] –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ - `POST /api/tasks/{id}/toggle?user_id=123` ‚Üí 200 OK
- [x] –ü–µ—Ä–µ–Ω–æ—Å –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π –¥–µ–Ω—å - `PUT /api/tasks/{id}?user_id=123` ‚Üí 200 OK
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏ - `POST /api/tasks?user_id=123` ‚Üí 200 OK
- [x] –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤ - `GET /api/projects?user_id=123` ‚Üí 200 OK

### –û—à–∏–±–∫–∏ –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã ‚úÖ

- [x] ~~HTTP 422 (undefined user_id)~~ ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- [x] ~~–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π endpoint –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á–∏~~ ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- [x] ~~user_id –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ DELETE~~ ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- [x] ~~user_id –Ω–µ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ PUT~~ ‚Üí –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- [x] ~~–°–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ user_id~~ ‚Üí –ó–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ async
- [x] ~~–ù–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫~~ ‚Üí –î–æ–±–∞–≤–ª–µ–Ω—ã try-catch
- [x] ~~–ü–ª–æ—Ö–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ~~ ‚Üí –î–æ–±–∞–≤–ª–µ–Ω—ã emoji –ª–æ–≥–∏

---

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ—Ä—ã –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏

#### –£—Å–ø–µ—à–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á–∏
```
üìã –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–¥–∞—á—É ID: 15
‚úÖ User ID –ø–æ–ª—É—á–µ–Ω: 123
```

#### –£—Å–ø–µ—à–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```
üìù –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–¥–∞—á—É –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ID: 15
‚úÖ User ID –ø–æ–ª—É—á–µ–Ω: 123
üìù –°–æ—Ö—Ä–∞–Ω—è–µ–º –∑–∞–¥–∞—á—É, user_id: 123
‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã
```

#### –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ
```
üìÅ –ó–∞–≥—Ä—É–∂–∞–µ–º –ø—Ä–æ–µ–∫—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚úÖ User ID –ø–æ–ª—É—á–µ–Ω: 123
üìã –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É
‚úÖ User ID –ø–æ–ª—É—á–µ–Ω: 123
```

#### –û—à–∏–±–∫–∞
```
üìã –ó–∞–≥—Ä—É–∂–∞–µ–º –∑–∞–¥–∞—á—É ID: 15
‚ùå User ID –Ω–µ –ø–æ–ª—É—á–µ–Ω
‚ùå –û—à–∏–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –û–±–Ω–æ–≤–∏—Ç—å frontend
```bash
cp /Users/d.dubenetskiy/Documents/tg_project/static/task.html /app/static/task.html
cp /Users/d.dubenetskiy/Documents/tg_project/static/task_edit.html /app/static/task_edit.html
cp /Users/d.dubenetskiy/Documents/tg_project/static/task_add.html /app/static/task_add.html
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–∏—Ç—å backend
```bash
cp /Users/d.dubenetskiy/Documents/tg_project/app/api/tasks.py /app/app/api/tasks.py
```

### –®–∞–≥ 3: –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```bash
# Docker
docker-compose down && docker-compose up -d

# –ò–ª–∏ systemctl
systemctl restart my-app
```

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å
```bash
# –û—Ç–∫—Ä—ã—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–¥–∞—á–∏
https://dialist.ru/dashboard/task.html?id=15

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Å–æ–ª—å (F12)
# –î–æ–ª–∂–Ω—ã –±—ã—Ç—å –ª–æ–≥–∏ —Å ‚úÖ
```

---

## ‚ú® –†–µ–∑—É–ª—å—Ç–∞—Ç

### –ë—ã–ª–æ
```
GET /api/tasks/15?user_id=undefined
‚Üê HTTP 422 Unprocessable Entity
```

### –°—Ç–∞–ª–æ
```
GET /api/tasks/15?user_id=123
‚Üê HTTP 200 OK
‚Üê {id: 15, title: "...", user_id: 123}
```

---

## üìå –í–∞–∂–Ω—ã–µ —Ñ–∞–π–ª—ã

1. **task.html** - –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –∑–∞–¥–∞—á (~60 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ)
2. **task_edit.html** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á (~35 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ)
3. **task_add.html** - –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á (~30 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ)
4. **app/api/tasks.py** - Backend API (~15 —Å—Ç—Ä–æ–∫ –∏–∑–º–µ–Ω–µ–Ω–æ)

---

## ‚úÖ –ì–û–¢–û–í–û!

–í—Å–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω—ã –∏ –≥–æ—Ç–æ–≤—ã –∫ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é.

**–°—Ç–∞—Ç—É—Å: READY FOR PRODUCTION**

–û—à–∏–±–∫–∞ 422 –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞! üéâ