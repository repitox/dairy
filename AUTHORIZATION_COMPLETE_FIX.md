# ‚úÖ –ü–æ–ª–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

## üêõ –ò—Å—Ö–æ–¥–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –Ω–∞ `local-auth` –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ø–∞–¥–∞–ª –Ω–∞ —ç–∫—Ä–∞–Ω "–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å" –≤–º–µ—Å—Ç–æ –¥–∞—à–±–æ—Ä–¥–∞.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã
–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ –ª–æ–≥–æ–≤ –≤—ã—è–≤–ª–µ–Ω—ã –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–µ API endpoints, –∫–æ—Ç–æ—Ä—ã–µ —Ç—Ä–µ–±–æ–≤–∞–ª–∏—Å—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É:

```bash
INFO: GET /api/navigation?category=main HTTP/1.1" 404 Not Found
INFO: GET /api/user/validate?user_id=123456789 HTTP/1.1" 404 Not Found
INFO: GET /api/dashboard/stats?user_id=123456789 HTTP/1.1" 404 Not Found
```

## üõ†Ô∏è –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –°–æ–∑–¥–∞–Ω API –º–æ–¥—É–ª—å –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
**–§–∞–π–ª**: `app/api/navigation.py`

#### –î–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ endpoints:

**GET /api/navigation**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ –º–µ–Ω—é
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏: `main`, `settings`
- –í–∫–ª—é—á–∞–µ—Ç —Å—á–µ—Ç—á–∏–∫–∏ –¥–ª—è –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é

```python
@router.get("/navigation")
async def get_navigation(category: str = "main", user_id: int = None):
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ –º–µ–Ω—é —Å –∏–∫–æ–Ω–∫–∞–º–∏ –∏ —Å—á–µ—Ç—á–∏–∫–∞–º–∏
```

**GET /api/user/validate**
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç—É—Å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```python
@router.get("/user/validate")
async def validate_user(user_id: int):
    # –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ë–î
```

**GET /api/dashboard/stats**
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –¥–ª—è –¥–∞—à–±–æ—Ä–¥–∞
- –í–∫–ª—é—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –∑–∞–¥–∞—á–∞—Ö, —Å–æ–±—ã—Ç–∏—è—Ö, –ø–æ–∫—É–ø–∫–∞—Ö

```python
@router.get("/dashboard/stats")
async def get_dashboard_stats(user_id: int):
    # –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
**–§–∞–π–ª**: `app/main.py`

```python
# –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç
from app.api import auth, shopping, events, tasks, projects, notes, dashboard, navigation

# –ü–æ–¥–∫–ª—é—á–µ–Ω —Ä–æ—É—Ç–µ—Ä
app.include_router(navigation.router, prefix="/api", tags=["navigation"])
```

**–§–∞–π–ª**: `app/api/__init__.py`

```python
# –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç navigation –º–æ–¥—É–ª—è
from . import auth, shopping, events, tasks, projects, notes, dashboard, navigation
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∞ API endpoints:
```bash
üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–æ–≤—ã–µ navigation endpoints:
  GET /api/navigation ‚úÖ
  GET /api/user/validate ‚úÖ
  GET /api/dashboard/stats ‚úÖ
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:
```bash
üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö endpoints...
‚úÖ Dashboard stats: 200
   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 123456789
   DB ID: 2
   –°—Ç–∞—Ç—É—Å: active
‚úÖ Navigation with user: 200
   –ü—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é: 6
   –°—á–µ—Ç—á–∏–∫ –∑–∞–¥–∞—á: 0
```

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
curl -X POST "http://localhost:8001/api/auth/telegram"
{
  "status": "ok",
  "user": {
    "id": 555666777,
    "db_id": 13,
    "first_name": "–ê–¥–º–∏–Ω",
    "last_name": "–°–∏—Å—Ç–µ–º—ã",
    "username": "admin_user",
    "full_name": "–ê–¥–º–∏–Ω –°–∏—Å—Ç–µ–º—ã"
  },
  "message": "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞"
}
```

## üéØ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

### –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (`category=main`):
```json
[
  {
    "id": "dashboard",
    "title": "–ì–ª–∞–≤–Ω–∞—è",
    "icon": "üè†",
    "url": "/dashboard/main.html",
    "active": true,
    "count": 0
  },
  {
    "id": "tasks",
    "title": "–ó–∞–¥–∞—á–∏",
    "icon": "‚úÖ",
    "url": "/dashboard/tasks.html",
    "count": 0
  },
  {
    "id": "events",
    "title": "–°–æ–±—ã—Ç–∏—è",
    "icon": "üìÖ",
    "url": "/dashboard/events.html",
    "count": 0
  },
  {
    "id": "shopping",
    "title": "–ü–æ–∫—É–ø–∫–∏",
    "icon": "üõí",
    "url": "/dashboard/shopping.html",
    "count": 0
  },
  {
    "id": "projects",
    "title": "–ü—Ä–æ–µ–∫—Ç—ã",
    "icon": "üìÅ",
    "url": "/dashboard/projects.html"
  },
  {
    "id": "notes",
    "title": "–ó–∞–º–µ—Ç–∫–∏",
    "icon": "üìù",
    "url": "/dashboard/notes.html"
  }
]
```

## üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### 1. –õ–æ–∫–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è:
1. –û—Ç–∫—Ä–æ–π—Ç–µ http://localhost:8001/local-auth
2. –í—ã–±–µ—Ä–∏—Ç–µ –ª—é–±–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ `/dashboard/main.html`

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ API:
```bash
# –ù–∞–≤–∏–≥–∞—Ü–∏—è
curl "http://localhost:8001/api/navigation?category=main"

# –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl "http://localhost:8001/api/user/validate?user_id=123456789"

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞
curl "http://localhost:8001/api/dashboard/stats?user_id=123456789"
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
```bash
curl -X POST "http://localhost:8001/api/auth/telegram" \
  -H "Content-Type: application/json" \
  -d '{"id": 123456789, "first_name": "Test", "username": "test"}'
```

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:**
   ```bash
   docker-compose -f docker-compose.new.yml logs app-new --tail=20
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ–∞–π–ª–æ–≤:**
   ```bash
   curl -I "http://localhost:8001/dashboard/main.html"
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ JavaScript –æ—à–∏–±–∫–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
   - –û—Ç–∫—Ä–æ–π—Ç–µ Developer Tools (F12)
   - –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ –≤–∫–ª–∞–¥–∫—É Console
   - –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —Å–Ω–æ–≤–∞

4. **–û—á–∏—Å—Ç–∏—Ç–µ localStorage:**
   ```javascript
   localStorage.clear();
   ```

## üéâ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

**–ü—Ä–æ–±–ª–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ—à–µ–Ω–∞!**

### –ß—Ç–æ —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç:
- ‚úÖ **–õ–æ–∫–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: http://localhost:8001/local-auth
- ‚úÖ **API –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**: POST /api/auth/telegram
- ‚úÖ **–ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω–æ–µ API**: GET /api/navigation
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: GET /api/user/validate
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥–∞—à–±–æ—Ä–¥–∞**: GET /api/dashboard/stats
- ‚úÖ **–°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ –ë–î**
- ‚úÖ **–ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞ –¥–∞—à–±–æ—Ä–¥**

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞:
- –í—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ API endpoints —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç –±—ç–∫–µ–Ω–¥–∞
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–æ–∑–¥–∞—é—Ç—Å—è –∏ –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è
- –ù–∞–≤–∏–≥–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–µ–π

**–¢–µ–ø–µ—Ä—å –ª–æ–∫–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –¥–∞—à–±–æ—Ä–¥!** üöÄ