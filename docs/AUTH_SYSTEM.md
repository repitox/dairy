# üîê –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–µ–∑ URL –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## ‚úÖ **–ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å:**

### ‚ùå **–†–∞–Ω—å—à–µ (–Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ):**
```
URL: /dashboard/main.html?user_id=123456789
- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤–∏–¥–µ–Ω –≤ URL
- –ú–æ–∂–Ω–æ –ø–æ–¥–¥–µ–ª–∞—Ç—å ID –≤ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–µ
- –ü–ª–æ—Ö–æ–π UX - –¥–ª–∏–Ω–Ω—ã–µ URL
```

### ‚úÖ **–¢–µ–ø–µ—Ä—å (–±–µ–∑–æ–ø–∞—Å–Ω–æ):**
```
URL: /dashboard/main.html
- –ß–∏—Å—Ç—ã–π URL –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –î–∞–Ω–Ω—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ localStorage
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤–∞–ª–∏–¥–Ω–æ—Å—Ç–∏
```

## üèóÔ∏è **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã:**

### 1. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (index.html)**
```javascript
// –ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
localStorage.setItem("telegram_user", JSON.stringify(userData));
window.location.href = '/dashboard/main.html'; // –ë–µ–∑ user_id!
```

### 2. **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (main.html)**
```javascript
// –ó–∞–≥—Ä—É–∂–∞–µ–º auth.js —É—Ç–∏–ª–∏—Ç—ã
const user = Auth.getCurrentUser();
if (!user) {
    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
    window.location.href = '/dashboard/index.html';
}
```

### 3. **API –∑–∞–ø—Ä–æ—Å—ã**
```javascript
// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ user_id
const response = await Auth.apiRequest('/api/tasks');
// –†–µ–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å: /api/tasks?user_id=123456789
```

## üìÅ **–§–∞–π–ª—ã —Å–∏—Å—Ç–µ–º—ã:**

### `dashboard/auth.js` - –£—Ç–∏–ª–∏—Ç—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
```javascript
// –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
Auth.getCurrentUser()      // –ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
Auth.getCurrentUserId()    // –ü–æ–ª—É—á–∏—Ç—å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
Auth.isAuthenticated()     // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
Auth.logout()             // –í—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
Auth.apiRequest(url)      // –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å
Auth.initAuthenticatedPage() // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
```

### `dashboard/index.html` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- Telegram Login Widget (–ø—Ä–æ–¥–∞–∫—à–µ–Ω)
- –õ–æ–∫–∞–ª—å–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è (—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
- –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–µ–∑ user_id

### `dashboard/main.html` - –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
- –ó–∞–≥—Ä—É–∑–∫–∞ auth.js
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –û—á–∏—Å—Ç–∫–∞ URL –æ—Ç —Å—Ç–∞—Ä—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

## üîí **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**

### **localStorage vs URL:**
```javascript
// ‚ùå –ù–µ–±–µ–∑–æ–ø–∞—Å–Ω–æ - –≤–∏–¥–Ω–æ –≤ URL
/dashboard/main.html?user_id=123456789

// ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ - —Å–∫—Ä—ã—Ç–æ –≤ localStorage
localStorage: {"id": 123456789, "first_name": "–ò–≤–∞–Ω", ...}
```

### **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö:**
```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö
if (!user.id || !user.first_name) {
    localStorage.removeItem("telegram_user");
    redirectToAuth();
}
```

### **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞:**
```javascript
// –£–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL
if (window.location.search) {
    window.history.replaceState({}, document.title, cleanUrl);
}
```

## üöÄ **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –Ω–æ–≤—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö:**

### –ü—Ä–æ—Å—Ç–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞:
```html
<!DOCTYPE html>
<html>
<head>
    <title>–ú–æ—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞</title>
</head>
<body>
    <div id="content">
        <h1>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userName"></span>!</h1>
    </div>

    <script src="auth.js"></script>
    <script>
        // Callback –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        window.onUserLoaded = function(user) {
            document.getElementById('userName').textContent = user.first_name;
        };
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        Auth.initAuthenticatedPage();
    </script>
</body>
</html>
```

### –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å API –∑–∞–ø—Ä–æ—Å–∞–º–∏:
```html
<script src="auth.js"></script>
<script>
    window.onUserLoaded = async function(user) {
        try {
            // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è user_id
            const response = await Auth.apiRequest('/api/tasks');
            const tasks = await response.json();
            
            displayTasks(tasks);
        } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–¥–∞—á:', error);
        }
    };
    
    Auth.initAuthenticatedPage();
</script>
```

## üîÑ **–ú–∏–≥—Ä–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü:**

### 1. –î–æ–±–∞–≤—å—Ç–µ auth.js:
```html
<script src="auth.js"></script>
```

### 2. –ó–∞–º–µ–Ω–∏—Ç–µ –ø—Ä–æ–≤–µ—Ä–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
```javascript
// ‚ùå –°—Ç–∞—Ä—ã–π –∫–æ–¥
const urlParams = new URLSearchParams(window.location.search);
const userId = urlParams.get('user_id');

// ‚úÖ –ù–æ–≤—ã–π –∫–æ–¥
const user = Auth.getCurrentUser();
if (!user) return Auth.requireAuth();
```

### 3. –û–±–Ω–æ–≤–∏—Ç–µ API –∑–∞–ø—Ä–æ—Å—ã:
```javascript
// ‚ùå –°—Ç–∞—Ä—ã–π –∫–æ–¥
fetch(`/api/tasks?user_id=${userId}`)

// ‚úÖ –ù–æ–≤—ã–π –∫–æ–¥
Auth.apiRequest('/api/tasks')
```

## üß™ **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏:
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞
console.log('–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:', Auth.getCurrentUser());
console.log('ID:', Auth.getCurrentUserId());
console.log('–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω:', Auth.isAuthenticated());
```

### –¢–µ—Å—Ç API –∑–∞–ø—Ä–æ—Å–æ–≤:
```javascript
// –¢–µ—Å—Ç –∑–∞–ø—Ä–æ—Å–∞
Auth.apiRequest('/api/tasks')
    .then(r => r.json())
    .then(data => console.log('–ó–∞–¥–∞—á–∏:', data))
    .catch(err => console.error('–û—à–∏–±–∫–∞:', err));
```

### –¢–µ—Å—Ç –≤—ã—Ö–æ–¥–∞:
```javascript
// –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
Auth.logout(); // –î–æ–ª–∂–µ–Ω –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ /dashboard/index.html
```

## üìã **–ß–µ–∫–ª–∏—Å—Ç –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**

### ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- [ ] –î–æ–±–∞–≤–∏—Ç—å `<script src="auth.js"></script>`
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Auth.initAuthenticatedPage()`
- [ ] –°–æ–∑–¥–∞—Ç—å `window.onUserLoaded` callback
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `Auth.apiRequest()` –¥–ª—è API

### ‚úÖ –ü—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã:
- [ ] –£–¥–∞–ª–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ user_id –∏–∑ URL
- [ ] –ó–∞–º–µ–Ω–∏—Ç—å –Ω–∞ `Auth.getCurrentUser()`
- [ ] –û–±–Ω–æ–≤–∏—Ç—å API –∑–∞–ø—Ä–æ—Å—ã
- [ ] –£–±—Ä–∞—Ç—å user_id –∏–∑ —Å—Å—ã–ª–æ–∫

### ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:
- [ ] URL –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç user_id
- [ ] localStorage —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- [ ] –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—é—Ç—Å—è
- [ ] API –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üéØ **–†–µ–∑—É–ª—å—Ç–∞—Ç:**

### **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:** ‚úÖ
- ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∫—Ä—ã—Ç –æ—Ç URL
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ ID

### **UX:** ‚úÖ
- –ß–∏—Å—Ç—ã–µ URL –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
- –ë—ã—Å—Ç—Ä–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π

### **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:** ‚úÖ
- –ü—Ä–æ—Å—Ç—ã–µ —É—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –∫–æ–¥
- –õ–µ–≥–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

**–¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–∞ –∏ —É–¥–æ–±–Ω–∞!** üîê‚ú®