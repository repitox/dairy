# üöÄ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –Ω–∞ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

## üìã –û–±–∑–æ—Ä

–ú–∏–≥—Ä–∞—Ü–∏—è —É–ø—Ä–æ—â–∞–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã `navigation_items` —Å 21 –ø–æ–ª—è –¥–æ 7 –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø–æ–ª–µ–π –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É dashboard –∏ webapp.

## üéØ –¶–µ–ª—å –º–∏–≥—Ä–∞—Ü–∏–∏

- ‚úÖ –£–ø—Ä–æ—Å—Ç–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ë–î
- ‚úÖ –ß–µ—Ç–∫–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å dashboard –∏ webapp –Ω–∞–≤–∏–≥–∞—Ü–∏—é
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –æ—Å–Ω–æ–≤—É –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –£–±—Ä–∞—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–ª—è

## üîß –°–ø–æ—Å–æ–±—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

### –°–ø–æ—Å–æ–± 1: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
cd /Users/d.dubenetskiy/Documents/tg_project
python3 deploy_navigation_simplify.py
```

### –°–ø–æ—Å–æ–± 2: –†—É—á–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

1. **–ö–æ–ø–∏—Ä—É–µ–º SQL —Ñ–∞–π–ª –Ω–∞ —Å–µ—Ä–≤–µ—Ä:**
```bash
scp production_navigation_simplify.sql c107597@h60.netangels.ru:/tmp/
```

2. **–ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —Å–µ—Ä–≤–µ—Ä—É:**
```bash
ssh c107597@h60.netangels.ru
```

3. **–í—ã–ø–æ–ª–Ω—è–µ–º –º–∏–≥—Ä–∞—Ü–∏—é:**
```bash
export PGPASSWORD='ZoXboBiphobem19'
psql -h postgres.c107597.h2 -U c107597_dialist_ru -d c107597_dialist_ru -f /tmp/production_navigation_simplify.sql
```

### –°–ø–æ—Å–æ–± 3: –ß–µ—Ä–µ–∑ SSH –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π

```bash
ssh c107597@h60.netangels.ru "export PGPASSWORD='ZoXboBiphobem19' && psql -h postgres.c107597.h2 -U c107597_dialist_ru -d c107597_dialist_ru" < production_navigation_simplify.sql
```

## üìä –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏:

- **–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** 7 –ø–æ–ª–µ–π –≤–º–µ—Å—Ç–æ 21
- **–ü–ª–∞—Ç—Ñ–æ—Ä–º—ã:** —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ dashboard/webapp
- **–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è:** `navigation_items_backup_20250119`
- **–î–∞–Ω–Ω—ã–µ:** –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

### –ù–æ–≤—ã–µ –ø–æ–ª—è:
1. `id` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä
2. `title` - –Ω–∞–∑–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é
3. `url` - —Å—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. `platform` - 'dashboard' –∏–ª–∏ 'webapp'
5. `sort_order` - –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
6. `parent_id` - —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–π —ç–ª–µ–º–µ–Ω—Ç
7. `is_active` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```sql
-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
SELECT 
    COUNT(*) as total,
    COUNT(CASE WHEN platform = 'dashboard' THEN 1 END) as dashboard,
    COUNT(CASE WHEN platform = 'webapp' THEN 1 END) as webapp
FROM navigation_items;

-- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã
\d navigation_items

-- –ü—Ä–∏–º–µ—Ä—ã –¥–∞–Ω–Ω—ã—Ö
SELECT id, title, url, platform, sort_order 
FROM navigation_items 
ORDER BY platform, sort_order 
LIMIT 10;
```

## üîÑ –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫, –º–æ–∂–Ω–æ –æ—Ç–∫–∞—Ç–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:

```bash
ssh c107597@h60.netangels.ru
export PGPASSWORD='ZoXboBiphobem19'
psql -h postgres.c107597.h2 -U c107597_dialist_ru -d c107597_dialist_ru -c "
DROP TABLE navigation_items;
ALTER TABLE navigation_items_backup_20250119 RENAME TO navigation_items;
"
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è:** –°—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∫–∞–∫ `navigation_items_backup_20250119`
2. **–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** ~30 —Å–µ–∫—É–Ω–¥
3. **–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:** –ù–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:** –ö–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π

## üìù –õ–æ–≥–∏

–ú–∏–≥—Ä–∞—Ü–∏—è –≤—ã–≤–æ–¥–∏—Ç –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏:
- üîç –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏ –¥–∞–Ω–Ω—ã–µ
- üìù –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã
- üì¶ –ü–µ—Ä–µ–Ω–æ—Å –¥–∞–Ω–Ω—ã—Ö
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞
- ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –ë–î
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
4. –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –æ—Ç–∫–∞—Ç

## üìÖ –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** 2025-01-19
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ:** ‚úÖ
- **–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É:** ‚úÖ