# üè† –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏—á–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ "–õ–∏—á–Ω–æ–µ"

## üìã –ó–∞–¥–∞—á–∞
–£–±—Ä–∞—Ç—å –∫–æ—Å—Ç—ã–ª–∏ —Å "#–ª–∏—á–Ω–æ–µ" –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–∞—Å—Ç–æ—è—â–∏–µ –ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. üîß –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–§–∞–π–ª:** `db.py` ‚Üí `add_user()`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –ü—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç "–õ–∏—á–Ω–æ–µ"
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ —É—á–∞—Å—Ç–Ω–∏–∫ —Å–≤–æ–µ–≥–æ –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –ü—Ä–æ–µ–∫—Ç –∏–º–µ–µ—Ç —Ü–≤–µ—Ç `#6366f1` –∏ —Å—Ç–∞—Ç—É—Å `active = TRUE`

```python
# –°–æ–∑–¥–∞–µ–º –ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
cur.execute("""
    INSERT INTO projects (name, owner_id, color, created_at, active)
    SELECT '–õ–∏—á–Ω–æ–µ', %s, '#6366f1', %s, TRUE
    WHERE NOT EXISTS (
        SELECT 1 FROM projects WHERE owner_id = %s AND name = '–õ–∏—á–Ω–æ–µ'
    )
    RETURNING id;
""", (internal_id, datetime.utcnow().isoformat(), internal_id))
```

### 2. üÜï –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –ø–æ–ª—É—á–µ–Ω–∏—è –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
**–§–∞–π–ª:** `db.py` ‚Üí `get_user_personal_project_id()`

```python
def get_user_personal_project_id(user_id: int) -> int:
    """
    –ü–æ–ª—É—á–∏—Ç—å ID –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    """
    with get_conn() as conn:
        with conn.cursor() as cur:
            cur.execute("""
                SELECT id FROM projects 
                WHERE owner_id = %s AND name = '–õ–∏—á–Ω–æ–µ' AND active = TRUE
                LIMIT 1
            """, (user_id,))
            result = cur.fetchone()
            return result['id'] if result else None
```

### 3. üîÑ –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –∏ —Å–æ–±—ã—Ç–∏–π
**–§–∞–π–ª:** `bot.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±—Ä–∞–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ `project_id = 'personal'`
- –ü—Ä–∏ `project_id = null` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è ID –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

```python
# –ï—Å–ª–∏ project_id None, –ø–æ–ª—É—á–∞–µ–º ID –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if project_id is None:
    project_id = get_user_personal_project_id(user_id)
    if not project_id:
        raise HTTPException(status_code=400, detail="–õ–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–µ –Ω–∞–π–¥–µ–Ω")
```

### 4. üé® –û–±–Ω–æ–≤–ª–µ–Ω—ã HTML-—Ñ–æ—Ä–º—ã —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á –∏ —Å–æ–±—ã—Ç–∏–π
**–§–∞–π–ª—ã:** `dashboard/add-task.html`, `dashboard/add-meeting.html`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –£–±—Ä–∞–Ω—ã –∫–æ—Å—Ç—ã–ª–∏ —Å –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –æ–ø—Ü–∏–∏ `'personal'` ‚Üí `'#–ª–∏—á–Ω–æ–µ'`
- –õ–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç —Ç–µ–ø–µ—Ä—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å –æ—Å—Ç–∞–ª—å–Ω—ã–º–∏ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —á–µ—Ä–µ–∑ API
- –ü—Ä–∏ –æ—à–∏–±–∫–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ –≤–º–µ—Å—Ç–æ —Ñ–µ–π–∫–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

```javascript
// –£–±—Ä–∞–Ω–æ:
// personalOption.value = 'personal';
// personalOption.textContent = '#–ª–∏—á–Ω–æ–µ';

// –¢–µ–ø–µ—Ä—å –ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ API –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
```

### 5. üìä –°–æ–∑–¥–∞–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
**–§–∞–π–ª:** `simple_personal_projects.py`

–°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ–µ–∫—Ç "–õ–∏—á–Ω–æ–µ" –¥–ª—è –≤—Å–µ—Ö —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ–≥–æ –µ—â–µ –Ω–µ—Ç.

**–†–µ–∑—É–ª—å—Ç–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏:**
```
üìä –ù–∞–π–¥–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: 2
‚úÖ –°–æ–∑–¥–∞–Ω –ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –£—Å–ø–µ—à–Ω—ã–π (telegram_id: 999888777) -> –ø—Ä–æ–µ–∫—Ç ID: 24
üìä –°–æ–∑–¥–∞–Ω–æ –Ω–æ–≤—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤: 1
üìä –£–∂–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ: 1
üéâ –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç –ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã!
```

### 6. üîÑ –û–±–Ω–æ–≤–ª–µ–Ω—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–µ
**–§–∞–π–ª:** `scheduler.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- `"#–ª–∏—á–Ω–æ–µ"` ‚Üí `"(–õ–∏—á–Ω–æ–µ)"` –≤ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–∏ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ë–æ–ª–µ–µ –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–π —Å—Ç–∏–ª—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á
```python
task_id = add_task(999888777, 24, '–¢–µ—Å—Ç–æ–≤–∞—è –∑–∞–¥–∞—á–∞', '–û–ø–∏—Å–∞–Ω–∏–µ', None, '–æ–±—ã—á–Ω–∞—è')
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –ó–∞–¥–∞—á–∞ —Å–æ–∑–¥–∞–Ω–∞ —Å ID 16 –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 999888777
```

### ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π
```python
event_id = add_event(999888777, 24, '–¢–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ', '–û—Ñ–∏—Å', '2024-12-20T10:00:00', '2024-12-20T11:00:00')
# –†–µ–∑—É–ª—å—Ç–∞—Ç: ‚úÖ –°–æ–±—ã—Ç–∏–µ —Å–æ–∑–¥–∞–Ω–æ —Å ID 22 –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 999888777
```

### ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ª–∏—á–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
```python
personal_project_id = get_user_personal_project_id(999888777)
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 24
```

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø—Ä–æ–µ–∫—Ç "–õ–∏—á–Ω–æ–µ"
2. **–°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á** - –ø—Ä–∏ `project_id = null` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
3. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π** - –ø—Ä–∏ `project_id = null` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
4. **–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤** - –ª–∏—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç
5. **–ú–∏–≥—Ä–∞—Ü–∏—è** - –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã

### ‚ùå –£–±—Ä–∞–Ω–æ:
1. **–ö–æ—Å—Ç—ã–ª—å "#–ª–∏—á–Ω–æ–µ"** –≤ HTML-—Ñ–æ—Ä–º–∞—Ö
2. **–û–±—Ä–∞–±–æ—Ç–∫–∞ 'personal'** –≤ —Å–µ—Ä–≤–µ—Ä–Ω–æ–º –∫–æ–¥–µ
3. **–ó–∞–ø–∏—Å–∏ —Å project_id = NULL** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –∏ —Å–æ–±—ã—Ç–∏–π —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
2. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å Telegram-–±–æ—Ç** - —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –≤—Å–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
3. **–û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é** - –æ–ø–∏—Å–∞—Ç—å –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–µ–∫—Ç–∞–º–∏
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - —Å–ª–µ–¥–∏—Ç—å –∑–∞ —Ä–∞–±–æ—Ç–æ–π –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

## üèÜ –ò—Ç–æ–≥

**–ö–æ—Å—Ç—ã–ª–∏ —É–±—Ä–∞–Ω—ã, –ª–∏—á–Ω—ã–µ –ø—Ä–æ–µ–∫—Ç—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ!**

–¢–µ–ø–µ—Ä—å –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∏–º–µ–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–π –ø—Ä–æ–µ–∫—Ç "–õ–∏—á–Ω–æ–µ", –∫–æ—Ç–æ—Ä—ã–π:
- –°–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–æ–µ–∫—Ç–æ–≤
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è –∑–∞–¥–∞—á –∏ —Å–æ–±—ã—Ç–∏–π –±–µ–∑ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
- –ú–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∫–∞–∫ –æ–±—ã—á–Ω—ã–π –ø—Ä–æ–µ–∫—Ç