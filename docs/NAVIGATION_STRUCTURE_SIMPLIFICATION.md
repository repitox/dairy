# –£–ø—Ä–æ—â–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏

## –û–±–∑–æ—Ä

–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã —Ç–∞–±–ª–∏—Ü—ã `navigation_items`. –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–ª—è, –æ—Å—Ç–∞–≤–ª–µ–Ω—ã —Ç–æ–ª—å–∫–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã.

## –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã

| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| `id` | SERIAL PRIMARY KEY | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä |
| `title` | VARCHAR(100) NOT NULL | –ù–∞–∑–≤–∞–Ω–∏–µ –ø—É–Ω–∫—Ç–∞ –º–µ–Ω—é |
| `url` | VARCHAR(255) NOT NULL | –°—Å—ã–ª–∫–∞ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É |
| `platform` | VARCHAR(20) NOT NULL | –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞: 'dashboard' –∏–ª–∏ 'webapp' |
| `sort_order` | INTEGER DEFAULT 0 | –ü–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ (—á–µ–º –º–µ–Ω—å—à–µ, —Ç–µ–º –≤—ã—à–µ) |
| `parent_id` | INTEGER DEFAULT NULL | ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞ (–¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏) |
| `is_active` | BOOLEAN DEFAULT TRUE | –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —ç–ª–µ–º–µ–Ω—Ç–∞ (–æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∏–ª–∏ –Ω–µ—Ç) |

## –ò–∑–º–µ–Ω–µ–Ω–∏—è

### –£–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è
- `icon` - –∏–∫–æ–Ω–∫–∏ —Ç–µ–ø–µ—Ä—å –∑–∞–¥–∞—é—Ç—Å—è –≤ –∫–æ–¥–µ
- `description` - –æ–ø–∏—Å–∞–Ω–∏—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- `is_visible` - –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `is_active`
- `category` - –∑–∞–º–µ–Ω–µ–Ω–æ –Ω–∞ `platform`
- `group_name` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `required_role` - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–µ—à–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `required_permission` - –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–µ—à–∞—é—Ç—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `badge_text` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `badge_color` - –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- `css_classes` - —Å—Ç–∏–ª–∏ –∑–∞–¥–∞—é—Ç—Å—è –≤ –∫–æ–¥–µ
- `attributes` - –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è
- `created_at` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω—É–∂–Ω—ã
- `updated_at` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω—É–∂–Ω—ã
- `created_by` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω—É–∂–Ω—ã
- `updated_by` - –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –Ω–µ –Ω—É–∂–Ω—ã

### –ù–æ–≤—ã–µ –ø–æ–ª—è
- `platform` - —á–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É dashboard –∏ webapp

## –ü–ª–∞—Ç—Ñ–æ—Ä–º—ã

### Dashboard
- URL –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `/dashboard/`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –ü—Ä–∏–º–µ—Ä—ã: `/dashboard/main.html`, `/dashboard/tasks.html`

### WebApp
- URL –±–µ–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è Telegram WebApp
- –ü—Ä–∏–º–µ—Ä—ã: `index.html`, `tasks.html`

## –ò–Ω–¥–µ–∫—Å—ã

- `idx_navigation_new_platform` - –ø–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ
- `idx_navigation_new_sort_order` - –ø–æ –ø–æ—Ä—è–¥–∫—É —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏
- `idx_navigation_new_active` - –ø–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `idx_navigation_new_parent` - –ø–æ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º—É —ç–ª–µ–º–µ–Ω—Ç—É

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- `chk_platform` - –ø—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ platform –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ 'dashboard' –∏–ª–∏ 'webapp'
- Foreign key –Ω–∞ `parent_id` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –∏–µ—Ä–∞—Ä—Ö–∏–∏

## –ú–∏–≥—Ä–∞—Ü–∏—è

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
```bash
docker exec -i tg_project-db-1 psql -U postgres -d telegram_app < migrations/20250119_120000_simplify_navigation_structure.sql
```

### –ü—Ä–æ–¥–∞–∫—à–µ–Ω
```sql
-- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ migrations/20250119_120000_simplify_navigation_structure.sql
```

## –†–µ–∑—É–ª—å—Ç–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

- ‚úÖ –£–ø—Ä–æ—â–µ–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ã —Å 21 –ø–æ–ª—è –¥–æ 7
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –º–µ–∂–¥—É dashboard –∏ webapp
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
- ‚úÖ –ü–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –æ—Å–Ω–æ–≤–∞ –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (parent_id)

## –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—Å–ª–µ –º–∏–≥—Ä–∞—Ü–∏–∏

- üìä –í—Å–µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: 18
- üñ•Ô∏è Dashboard —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 8
- üì± WebApp —ç–ª–µ–º–µ–Ω—Ç–æ–≤: 10

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

### –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è dashboard
```sql
SELECT id, title, url, sort_order, parent_id 
FROM navigation_items 
WHERE platform = 'dashboard' AND is_active = true 
ORDER BY sort_order;
```

### –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è webapp
```sql
SELECT id, title, url, sort_order, parent_id 
FROM navigation_items 
WHERE platform = 'webapp' AND is_active = true 
ORDER BY sort_order;
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–∞
```sql
INSERT INTO navigation_items (title, url, platform, sort_order, is_active) 
VALUES ('–ù–æ–≤–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞', 'new-page.html', 'webapp', 110, true);
```

### –î–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞
```sql
UPDATE navigation_items SET is_active = false WHERE id = 1;
```

## –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–∏

–ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç–∫–∞—Ç, —Å—Ç–∞—Ä–∞—è —Ç–∞–±–ª–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –∫–∞–∫ `navigation_items_old`:

```sql
BEGIN;
DROP TABLE navigation_items;
ALTER TABLE navigation_items_old RENAME TO navigation_items;
COMMIT;
```

## –î–∞—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

- **–õ–æ–∫–∞–ª—å–Ω–æ**: 2025-01-19 12:00:00
- **–ü—Ä–æ–¥–∞–∫—à–µ–Ω**: –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è