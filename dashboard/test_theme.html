<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º</title>
    <link rel="stylesheet" href="themes.css">
    <style>
        body {
            background: var(--bg-primary);
            color: var(--text-primary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            transition: all 0.3s ease;
        }
        
        .test-card {
            background: var(--bg-card);
            border: 1px solid var(--border-light);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 2px 8px var(--shadow-light);
        }
        
        .theme-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }
        
        .theme-btn {
            background: var(--tg-blue);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .theme-btn:hover {
            opacity: 0.8;
        }
        
        .theme-btn.active {
            background: var(--tg-green);
        }
        
        .status {
            background: var(--bg-secondary);
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>üé® –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–º</h1>
    
    <div class="test-card">
        <h3>–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</h3>
        <div id="current-theme" class="status">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div id="theme-manager-status" class="status">–ü—Ä–æ–≤–µ—Ä–∫–∞ ThemeManager...</div>
    </div>
    
    <div class="test-card">
        <h3>–ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º</h3>
        <div class="theme-buttons">
            <button class="theme-btn" onclick="testSetTheme('light')">–°–≤–µ—Ç–ª–∞—è</button>
            <button class="theme-btn" onclick="testSetTheme('dark')">–¢–µ–º–Ω–∞—è</button>
            <button class="theme-btn" onclick="testSetTheme('auto')">–ê–≤—Ç–æ</button>
            <button class="theme-btn" onclick="testToggleTheme()">–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å</button>
        </div>
    </div>
    
    <div class="test-card">
        <h3>–õ–æ–≥–∏</h3>
        <div id="logs" class="status" style="height: 200px; overflow-y: scroll;"></div>
    </div>

    <script src="dashboard/theme-manager.js"></script>
    <script>
        function log(message) {
            const logs = document.getElementById('logs');
            const time = new Date().toLocaleTimeString();
            logs.innerHTML += `[${time}] ${message}<br>`;
            logs.scrollTop = logs.scrollHeight;
            console.log(message);
        }

        function updateStatus() {
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ç–µ–∫—É—â—É—é —Ç–µ–º—É
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            document.getElementById('current-theme').textContent = `–¢–µ–∫—É—â–∞—è —Ç–µ–º–∞: ${currentTheme}`;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å ThemeManager
            const tmStatus = window.setTheme ? '‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω' : '‚ùå –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω';
            document.getElementById('theme-manager-status').textContent = `ThemeManager: ${tmStatus}`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∞–∫—Ç–∏–≤–Ω—É—é –∫–Ω–æ–ø–∫—É
            document.querySelectorAll('.theme-btn').forEach(btn => btn.classList.remove('active'));
            const activeBtn = document.querySelector(`[onclick="testSetTheme('${currentTheme}')"]`);
            if (activeBtn) activeBtn.classList.add('active');
        }

        function testSetTheme(theme) {
            log(`üé® –ü–æ–ø—ã—Ç–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–µ–º—É: ${theme}`);
            
            if (window.setTheme) {
                window.setTheme(theme);
                log(`‚úÖ –¢–µ–º–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞: ${theme}`);
            } else {
                log('‚ùå window.setTheme –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            }
            
            setTimeout(updateStatus, 100);
        }

        function testToggleTheme() {
            log('üîÑ –ü–æ–ø—ã—Ç–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É');
            
            if (window.toggleTheme) {
                window.toggleTheme();
                log('‚úÖ –¢–µ–º–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∞');
            } else {
                log('‚ùå window.toggleTheme –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω');
            }
            
            setTimeout(updateStatus, 100);
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å –∫–∞–∂–¥—ã–µ 500–º—Å
        setInterval(updateStatus, 500);
        
        // –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        setTimeout(() => {
            updateStatus();
            log('üìä –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞');
        }, 100);
        
        // –°–ª—É—à–∞–µ–º —Å–æ–±—ã—Ç–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã
        document.addEventListener('themechange', (e) => {
            log(`üì° –ü–æ–ª—É—á–µ–Ω–æ —Å–æ–±—ã—Ç–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç–µ–º—ã: ${e.detail.theme}`);
            updateStatus();
        });
    </script>
</body>
</html>