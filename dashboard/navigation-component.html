<!-- –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü –¥–∞—à–±–æ—Ä–¥–∞ -->
<!-- –í–∫–ª—é—á–∞–µ—Ç navbar –∏ sidebar -->

<!-- Navbar -->
<nav class="navbar" id="main-navbar">
    <!-- –õ–æ–≥–æ—Ç–∏–ø/–ë—Ä–µ–Ω–¥ -->
    <a href="/dashboard/main.html" class="navbar-brand">
        <div class="navbar-brand-icon">üì±</div>
        <span>Dialist</span>
    </a>

    <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å (–ø–æ–∏—Å–∫) - —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
    <div class="navbar-center navbar-mobile-hidden">
        <div class="navbar-search">
            <div class="navbar-search-icon">üîç</div>
            <input type="text" class="navbar-search-input" placeholder="–ü–æ–∏—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤" id="navbar-search">
        </div>
    </div>

    <!-- –î–µ–π—Å—Ç–≤–∏—è –∏ –ø—Ä–æ—Ñ–∏–ª—å -->
    <div class="navbar-actions">
        <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è - —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <button class="navbar-btn navbar-mobile-hidden" title="–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è" onclick="showNotifications()">
            üîî
            <span class="navbar-btn-badge" id="notifications-badge">0</span>
        </button>

        <!-- –°–æ–æ–±—â–µ–Ω–∏—è - —Å–∫—Ä—ã–≤–∞—é—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <button class="navbar-btn navbar-mobile-hidden" title="–°–æ–æ–±—â–µ–Ω–∏—è" onclick="showMessages()">
            üí¨
            <span class="navbar-btn-badge" id="messages-badge">0</span>
        </button>

        <!-- –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è - —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <div class="navbar-user navbar-mobile-hidden" onclick="toggleUserDropdown()">
            <div class="navbar-user-avatar" id="user-avatar">–£</div>
            <div class="navbar-user-info">
                <div class="navbar-user-name" id="user-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                <div class="navbar-user-status" id="user-status">–û–Ω–ª–∞–π–Ω</div>
            </div>
            <div class="navbar-dropdown" id="user-dropdown">
                <a href="/dashboard/settings.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üë§</span>
                    –ü—Ä–æ—Ñ–∏–ª—å
                </a>
                <a href="/dashboard/settings.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">‚öôÔ∏è</span>
                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </a>
                <div class="navbar-dropdown-divider"></div>
                <a href="/dashboard/ui-kit.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üé®</span>
                    UI Kit
                </a>
                <div class="navbar-dropdown-divider"></div>
                <a href="#" class="navbar-dropdown-item" onclick="logout()">
                    <span class="navbar-dropdown-item-icon">üö™</span>
                    –í—ã–π—Ç–∏
                </a>
            </div>
        </div>
        
        <!-- –ú–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é (–≥–∞–º–±—É—Ä–≥–µ—Ä) - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö -->
        <div class="navbar-mobile-only" onclick="toggleMobileMenu()">
            <button class="mobile-menu-btn" id="mobile-menu-btn">‚ò∞</button>

            <div class="navbar-dropdown" id="mobile-menu-dropdown">
                <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
                <div class="user-info-mobile" style="padding: 15px; text-align: center;">
                    <div class="navbar-user-avatar" id="mobile-user-avatar"
                        style="margin: 0 auto 10px auto; width: 50px; height: 50px; font-size: 24px;">–£</div>
                    <div class="navbar-user-name" id="mobile-user-name"
                        style="font-weight: 600; margin-bottom: 5px;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</div>
                    <div id="mobile-user-details" style="font-size: 12px; color: var(--text-secondary);">ID: 0</div>
                </div>

                <div class="navbar-dropdown-divider"></div>

                <!-- –ü–æ–∏—Å–∫ –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é -->
                <div style="padding: 12px;">
                    <div class="navbar-search">
                        <div class="navbar-search-icon">üîç</div>
                        <input type="text" class="navbar-search-input" placeholder="–ü–æ–∏—Å–∫..." id="mobile-search">
                    </div>
                </div>

                <div class="navbar-dropdown-divider"></div>

                <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ä–∞–∑–¥–µ–ª—ã -->
                <a href="/dashboard/main.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üè†</span>
                    –ì–ª–∞–≤–Ω–∞—è
                </a>
                <a href="/dashboard/tasks.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üìã</span>
                    –ó–∞–¥–∞—á–∏
                </a>
                <a href="/dashboard/meetings.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üìÖ</span>
                    –í—Å—Ç—Ä–µ—á–∏
                </a>
                <a href="/dashboard/projects.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üìÅ</span>
                    –ü—Ä–æ–µ–∫—Ç—ã
                </a>
                <a href="/dashboard/shopping.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üõí</span>
                    –ü–æ–∫—É–ø–∫–∏
                </a>
                <a href="/dashboard/notes.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üìù</span>
                    –ó–∞–º–µ—Ç–∫–∏
                </a>

                <div class="navbar-dropdown-divider"></div>

                <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏ —Å–æ–æ–±—â–µ–Ω–∏—è -->
                <a href="#" class="navbar-dropdown-item" onclick="showNotifications()">
                    <span class="navbar-dropdown-item-icon">üîî</span>
                    –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
                    <span class="navbar-btn-badge" style="margin-left: auto;"
                        id="mobile-notifications-badge">0</span>
                </a>
                <a href="#" class="navbar-dropdown-item" onclick="showMessages()">
                    <span class="navbar-dropdown-item-icon">üí¨</span>
                    –°–æ–æ–±—â–µ–Ω–∏—è
                    <span class="navbar-btn-badge" style="margin-left: auto;" id="mobile-messages-badge">0</span>
                </a>

                <div class="navbar-dropdown-divider"></div>

                <!-- –ü—Ä–æ—Ñ–∏–ª—å –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ -->
                <a href="/dashboard/settings.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üë§</span>
                    –ü—Ä–æ—Ñ–∏–ª—å
                </a>
                <a href="/dashboard/settings.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">‚öôÔ∏è</span>
                    –ù–∞—Å—Ç—Ä–æ–π–∫–∏
                </a>
                <a href="/dashboard/ui-kit.html" class="navbar-dropdown-item">
                    <span class="navbar-dropdown-item-icon">üé®</span>
                    UI Kit
                </a>

                <div class="navbar-dropdown-divider"></div>

                <!-- –í—ã—Ö–æ–¥ -->
                <a href="#" class="navbar-dropdown-item" onclick="logout()">
                    <span class="navbar-dropdown-item-icon">üö™</span>
                    –í—ã–π—Ç–∏
                </a>
            </div>
        </div>
    </div>
</nav>

<!-- –ë–æ–∫–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –∏ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
<div class="dashboard-layout">
    <!-- –ë–æ–∫–æ–≤–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="sidebar" id="sidebar">
        
        <!-- –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–µ —Å—Å—ã–ª–∫–∏ -->
        <div class="navigation-demo">
            <a href="/dashboard/main.html" class="nav-item" data-page="main">
                <span>üè†</span>
                –ì–ª–∞–≤–Ω–∞—è
            </a>
            <a href="/dashboard/tasks.html" class="nav-item" data-page="tasks">
                <span>üìã</span>
                –ó–∞–¥–∞—á–∏
            </a>
            <a href="/dashboard/meetings.html" class="nav-item" data-page="meetings">
                <span>üìÖ</span>
                –í—Å—Ç—Ä–µ—á–∏
            </a>
            <a href="/dashboard/projects.html" class="nav-item" data-page="projects">
                <span>üìÅ</span>
                –ü—Ä–æ–µ–∫—Ç—ã
            </a>
            <a href="/dashboard/shopping.html" class="nav-item" data-page="shopping">
                <span>üõí</span>
                –ü–æ–∫—É–ø–∫–∏
            </a>
            <a href="/dashboard/notes.html" class="nav-item" data-page="notes">
                <span>üìù</span>
                –ó–∞–º–µ—Ç–∫–∏
            </a>
            <a href="/dashboard/settings.html" class="nav-item" data-page="settings">
                <span>‚öôÔ∏è</span>
                –ù–∞—Å—Ç—Ä–æ–π–∫–∏
            </a>
            <a href="/dashboard/ui-kit.html" class="nav-item" data-page="ui-kit">
                <span>üé®</span>
                UI Kit
            </a>
        </div>
    </div>
    
    <!-- –û–≤–µ—Ä–ª–µ–π –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏ -->
    <div class="sidebar-overlay" id="sidebar-overlay" onclick="toggleSidebar()"></div>
    
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <div class="main-content">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±—É–¥–µ—Ç –≤—Å—Ç–∞–≤–ª–µ–Ω —Å—é–¥–∞ -->
        <div class="content-body" id="page-content">
            <!-- –ó–¥–µ—Å—å –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã -->
        </div>
    </div>
</div>

<script>
// –ù–∞–≤–∏–≥–∞—Ü–∏–æ–Ω–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç JavaScript
(function() {
    // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏ –∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
    window.showNotifications = function() {
        alert('üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è\n\n–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–∞—à–∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è');
    };

    window.showMessages = function() {
        alert('üí¨ –°–æ–æ–±—â–µ–Ω–∏—è\n\n–ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –≤–∞—à–∏ —Å–æ–æ–±—â–µ–Ω–∏—è');
    };

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã—Ö–æ–¥–∞ –∏–∑ —Å–∏—Å—Ç–µ–º—ã
    window.logout = function() {
        if (confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤—ã–π—Ç–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã?')) {
            try {
                // –û—á–∏—â–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–∑ localStorage
                localStorage.removeItem('telegram_user');
                localStorage.removeItem('user_id');
                localStorage.removeItem('user_auth');
                
                // –û—á–∏—â–∞–µ–º –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                Object.keys(localStorage).forEach(key => {
                    if (key.startsWith('user_') || key.startsWith('telegram_')) {
                        localStorage.removeItem(key);
                    }
                });
                
                console.log('‚úÖ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—á–∏—â–µ–Ω—ã, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤—ã—Ö–æ–¥...');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± —É—Å–ø–µ—à–Ω–æ–º –≤—ã—Ö–æ–¥–µ
                const notification = document.createElement('div');
                notification.style.cssText = `
                    position: fixed;
                    top: 20px;
                    right: 20px;
                    background: linear-gradient(135deg, #28a745, #20c997);
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                    z-index: 10000;
                    font-weight: 500;
                `;
                notification.textContent = '‚úÖ –í—ã —É—Å–ø–µ—à–Ω–æ –≤—ã—à–ª–∏ –∏–∑ —Å–∏—Å—Ç–µ–º—ã';
                document.body.appendChild(notification);
                
                // –£–±–∏—Ä–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥—ã –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
                setTimeout(() => {
                    notification.remove();
                    window.location.href = '/dashboard/';
                }, 1500);
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ:', error);
                // –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏ –≤—Å–µ —Ä–∞–≤–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º
                window.location.href = '/dashboard/';
            }
        }
    };

    // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å UI
    window.toggleUserDropdown = function() {
        const dropdown = document.getElementById('user-dropdown');
        if (dropdown) {
            dropdown.classList.toggle('show');
        }
    };

    window.toggleMobileMenu = function() {
        const dropdown = document.getElementById('mobile-menu-dropdown');
        const btn = document.getElementById('mobile-menu-btn');

        if (dropdown && btn) {
            dropdown.classList.toggle('show');

            // –ò–∑–º–µ–Ω—è–µ–º –∏–∫–æ–Ω–∫—É
            if (dropdown.classList.contains('show')) {
                btn.textContent = '‚úï';
            } else {
                btn.textContent = '‚ò∞';
            }
        }
    };
    
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–æ–∫–æ–≤–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
    window.toggleSidebar = function() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        
        if (sidebar && overlay) {
            sidebar.classList.toggle('open');
            overlay.classList.toggle('show');
        }
    };

    // –ó–∞–∫—Ä—ã—Ç–∏–µ dropdown –ø—Ä–∏ –∫–ª–∏–∫–µ –≤–Ω–µ –µ–≥–æ
    document.addEventListener('click', function(event) {
        const userDropdown = document.getElementById('user-dropdown');
        const mobileDropdown = document.getElementById('mobile-menu-dropdown');
        const userButton = event.target.closest('.navbar-user');
        const mobileButton = event.target.closest('.navbar-mobile-only');
        
        if (!userButton && userDropdown) {
            userDropdown.classList.remove('show');
        }
        
        if (!mobileButton && mobileDropdown) {
            mobileDropdown.classList.remove('show');
            const btn = document.getElementById('mobile-menu-btn');
            if (btn) {
                btn.textContent = '‚ò∞';
            }
        }
    });

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    function setActivePage() {
        const currentPath = window.location.pathname;
        const navItems = document.querySelectorAll('.nav-item');
        
        navItems.forEach(item => {
            item.classList.remove('active');
            if (item.getAttribute('href') === currentPath) {
                item.classList.add('active');
            }
        });

        // –¢–∞–∫–∂–µ –≤—ã–¥–µ–ª—è–µ–º –≤ –º–æ–±–∏–ª—å–Ω–æ–º –º–µ–Ω—é
        const mobileItems = document.querySelectorAll('.navbar-dropdown-item');
        mobileItems.forEach(item => {
            item.style.background = '';
            item.style.color = '';
            if (item.getAttribute('href') === currentPath) {
                item.style.background = 'rgba(84, 169, 235, 0.2)';
                item.style.color = 'var(--bg-accent)';
            }
        });
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–µ–∂–¥—É navbar –∏ sidebar
    function syncUserData() {
        // –ö–æ–ø–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ –∏–∑ navbar –≤ sidebar
        const userName = document.getElementById('user-name')?.textContent || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
        const userStatus = document.getElementById('user-status')?.textContent || '–û–Ω–ª–∞–π–Ω';
        const userAvatar = document.getElementById('user-avatar')?.textContent || '–ü';
        
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–æ–∫–æ–≤—É—é –Ω–∞–≤–∏–≥–∞—Ü–∏—é
        const sidebarName = document.getElementById('sidebar-user-name');
        const sidebarStatus = document.getElementById('sidebar-user-status');
        const sidebarAvatar = document.getElementById('sidebar-user-avatar');
        
        if (sidebarName) sidebarName.textContent = userName;
        if (sidebarStatus) sidebarStatus.textContent = userStatus;
        if (sidebarAvatar) sidebarAvatar.textContent = userAvatar;

        // –¢–∞–∫–∂–µ –∫–æ–ø–∏—Ä—É–µ–º –≤ –º–æ–±–∏–ª—å–Ω–æ–µ –º–µ–Ω—é
        const mobileName = document.getElementById('mobile-user-name');
        const mobileAvatar = document.getElementById('mobile-user-avatar');
        
        if (mobileName) mobileName.textContent = userName;
        if (mobileAvatar) mobileAvatar.textContent = userAvatar;
    }

    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
    function updateUserInfo(user) {
        console.log('NavigationComponent.updateUserInfo called with:', user);
        
        if (!user) {
            console.warn('updateUserInfo: user is null or undefined');
            return;
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º navbar
        const userAvatar = document.getElementById('user-avatar');
        const userName = document.getElementById('user-name');
        const userStatus = document.getElementById('user-status');
        
        console.log('Found elements:', { userAvatar, userName, userStatus });
        
        if (userAvatar && user.first_name) {
            userAvatar.textContent = user.first_name.charAt(0).toUpperCase();
            console.log('Updated avatar to:', user.first_name.charAt(0).toUpperCase());
        }
        if (userName) {
            const displayName = user.first_name || user.username || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            userName.textContent = displayName;
            console.log('Updated userName to:', displayName);
        }
        if (userStatus) {
            userStatus.textContent = '–û–Ω–ª–∞–π–Ω';
        }

        // –û–±–Ω–æ–≤–ª—è–µ–º –º–æ–±–∏–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
        const mobileAvatar = document.getElementById('mobile-user-avatar');
        const mobileName = document.getElementById('mobile-user-name');
        const mobileDetails = document.getElementById('mobile-user-details');
        
        if (mobileAvatar && user.first_name) {
            mobileAvatar.textContent = user.first_name.charAt(0).toUpperCase();
        }
        if (mobileName) {
            const displayName = user.first_name || user.username || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            mobileName.textContent = displayName;
        }
        if (mobileDetails) {
            const details = [];
            if (user.username) details.push(`@${user.username}`);
            details.push(`ID: ${user.id}`);
            mobileDetails.textContent = details.join(' ‚Ä¢ ');
        }

        // –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ–º —Å sidebar
        syncUserData();
        
        console.log('NavigationComponent.updateUserInfo completed');
    };

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    document.addEventListener('DOMContentLoaded', function() {
        setActivePage();
        syncUserData();
        
        // –ï—Å–ª–∏ –µ—Å—Ç—å Auth —Å–∏—Å—Ç–µ–º–∞, –ø–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –Ω–µ–π
        if (typeof window.onUserLoaded === 'undefined') {
            window.onUserLoaded = function(user) {
                updateUserInfo(user);
            };
        }
    });

    // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö —Å–∫—Ä–∏–ø—Ç–∞—Ö
    window.NavigationComponent = {
        setActivePage: setActivePage,
        syncUserData: syncUserData,
        updateUserInfo: updateUserInfo
    };

    // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏
    window.updateUserInfo = updateUserInfo;
})();
</script>